console error

Step1.js:7 
            
            
            POST https://us-central1-cashman-790ad.cloudfunctions.net/handleExtractData 500 (Internal Server Error)

Step1.js:22  üî• Cloud Function Response Error: {"error": "An error occurred while processing the bank statement."}

Controller.js:64  ‚ùå Extraction failed


pip logs

2025-06-26T09:57:45.465226477Z N getBudgetTemplate: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"Jody.Kruger@gmail.com","principalSubject":"user:Jody.Kruger@gmail.com"},"requestMetadata":{"callerIp":"196.6.115.123","callerSuppliedUserAgent":"FirebaseCLI/14.7.0,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2025-06-26T09:57:44.684841197Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","authorizationInfo":[{"resource":"projects/cashman-790ad/locations/us-central1/functions/getBudgetTemplate","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{"service":"cloudfunctions.googleapis.com","name":"projects/cashman-790ad/locations/us-central1/functions/getBudgetTemplate","type":"cloudfunctions.googleapis.com/Function"},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/cashman-790ad/locations/us-central1/functions/getBudgetTemplate","request":{"@type":"type.googleapis.com/google.cloud.functions.v2.UpdateFunctionRequest","update_mask":{"paths":["name","build_config.runtime","build_config.entry_point","build_config.source.storage_source.bucket","build_config.source.storage_source.object","build_config.environment_variables","build_config.source_token","service_config.environment_variables","service_config.secret_environment_variables","service_config.ingress_settings","service_config.timeout_seconds","service_config.service_account_email","service_config.available_memory","service_config.min_instance_count","service_config.max_instance_count","service_config.max_instance_request_concurrency","service_config.available_cpu","labels"]},"function":{"service_config":{"max_instance_request_concurrency":80,"available_cpu":"1","available_memory":"256Mi"},"name":"projects/cashman-790ad/locations/us-central1/functions/getBudgetTemplate","build_config":{"entry_point":"getBudgetTemplate","source":{},"runtime":"python312"},"labels":{"firebase-functions-hash":"ea98d418ec44309c4f409a90c9a19ed51f4fd6b6","deployment-tool":"cli-firebase"}}},"response":{"@type":"type.googleapis.com/google.longrunning.Operation"},"resourceLocation":{"currentLocations":["us-central1"]}}
2025-06-26T09:58:45.161785897Z N handleExtractData: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"Jody.Kruger@gmail.com","principalSubject":"user:Jody.Kruger@gmail.com"},"requestMetadata":{"callerIp":"196.6.115.123","callerSuppliedUserAgent":"FirebaseCLI/14.7.0,gzip(gfe),gzip(gfe)","requestAttributes":{"time":"2025-06-26T09:58:44.332961935Z","auth":{}},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","authorizationInfo":[{"resource":"projects/cashman-790ad/locations/us-central1/functions/handleExtractData","permission":"cloudfunctions.functions.update","granted":true,"resourceAttributes":{"service":"cloudfunctions.googleapis.com","name":"projects/cashman-790ad/locations/us-central1/functions/handleExtractData","type":"cloudfunctions.googleapis.com/Function"},"permissionType":"ADMIN_WRITE"}],"resourceName":"projects/cashman-790ad/locations/us-central1/functions/handleExtractData","request":{"update_mask":{"paths":["name","build_config.runtime","build_config.entry_point","build_config.source.storage_source.bucket","build_config.source.storage_source.object","build_config.environment_variables","build_config.source_token","service_config.environment_variables","service_config.secret_environment_variables","service_config.ingress_settings","service_config.timeout_seconds","service_config.service_account_email","service_config.available_memory","service_config.min_instance_count","service_config.max_instance_count","service_config.max_instance_request_concurrency","service_config.available_cpu","labels"]},"@type":"type.googleapis.com/google.cloud.functions.v2.UpdateFunctionRequest","function":{"build_config":{"runtime":"python312","source_token":"Cldwcm9qZWN0cy8xMDYwMzM0NTk0OTUvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9jYWJjMjkxYS01YjY0LTQxMjEtOTQ0ZC01NTZkOWM1ODI3MTQScnVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L2Nhc2htYW4tNzkwYWQvZ2NmLWFydGlmYWN0cy9jYXNobWFuLS03OTBhZF9fdXMtLWNlbnRyYWwxX19nZXRfYnVkZ2V0X3RlbXBsYXRlOnZlcnNpb25fMRin4tiAiwMiSHByb2plY3RzL2Nhc2htYW4tNzkwYWQvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2Z1bmN0aW9ucy9nZXRCdWRnZXRUZW1wbGF0ZSoMCNGz9MIGELizj+QBMglweXRob24zMTI6eAokZ2NyLmlvL2dhZS1ydW50aW1lcy9weXRob24zMTI6c3RhYmxlElB1cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL3B5dGhvbjMxMkAB","source":{},"entry_point":"handleExtractData"},"labels":{"firebase-functions-hash":"ea98d418ec44309c4f409a90c9a19ed51f4fd6b6","deployment-tool":"cli-firebase"},"name":"projects/cashman-790ad/locations/us-central1/functions/handleExtractData","service_config":{"available_cpu":"1","available_memory":"256Mi","max_instance_request_concurrency":80}}},"response":{"@type":"type.googleapis.com/google.longrunning.Operation"},"resourceLocation":{"currentLocations":["us-central1"]}}
2025-06-26T09:58:52.647772Z I getbudgettemplate: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2025-06-26T09:58:54.444749123Z N getBudgetTemplate: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"Jody.Kruger@gmail.com","principalSubject":"user:Jody.Kruger@gmail.com"},"requestMetadata":{"requestAttributes":{},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","resourceName":"projects/cashman-790ad/locations/us-central1/functions/getBudgetTemplate","response":{"buildConfig":{"automaticUpdatePolicy":{},"runtime":"python312","entryPoint":"getBudgetTemplate","source":{},"dockerRegistry":"ARTIFACT_REGISTRY","dockerRepository":"projects/cashman-790ad/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/cashman-790ad/serviceAccounts/106033459495-compute@developer.gserviceaccount.com"},"state":"ACTIVE","updateTime":"2025-06-26T09:57:45.438014010Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"ea98d418ec44309c4f409a90c9a19ed51f4fd6b6"},"url":"https://us-central1-cashman-790ad.cloudfunctions.net/getBudgetTemplate","createTime":"2025-02-20T18:22:09.185544313Z","satisfiesPzi":true,"name":"projects/cashman-790ad/locations/us-central1/functions/getBudgetTemplate","serviceConfig":{"maxInstanceCount":3,"timeoutSeconds":60,"ingressSettings":"ALLOW_ALL","uri":"https://getbudgettemplate-7kw24wfehq-uc.a.run.app","revision":"getbudgettemplate-00015-wel","availableCpu":"1","serviceAccountEmail":"106033459495-compute@developer.gserviceaccount.com","allTrafficOnLatestRevision":true,"availableMemory":"256Mi","maxInstanceRequestConcurrency":80},"environment":"GEN_2","@type":"type.googleapis.com/google.cloud.functions.v2.Function"},"resourceLocation":{"currentLocations":["us-central1"]}}
2025-06-26T09:58:58.974840Z I handleextractdata: Default STARTUP TCP probe succeeded after 1 attempt for container "worker" on port 8080.
2025-06-26T09:59:00.704948654Z N handleExtractData: {"@type":"type.googleapis.com/google.cloud.audit.AuditLog","status":{},"authenticationInfo":{"principalEmail":"Jody.Kruger@gmail.com","principalSubject":"user:Jody.Kruger@gmail.com"},"requestMetadata":{"requestAttributes":{},"destinationAttributes":{}},"serviceName":"cloudfunctions.googleapis.com","methodName":"google.cloud.functions.v2.FunctionService.UpdateFunction","resourceName":"projects/cashman-790ad/locations/us-central1/functions/handleExtractData","response":{"buildConfig":{"automaticUpdatePolicy":{},"runtime":"python312","entryPoint":"handleExtractData","source":{},"dockerRegistry":"ARTIFACT_REGISTRY","dockerRepository":"projects/cashman-790ad/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/cashman-790ad/serviceAccounts/106033459495-compute@developer.gserviceaccount.com"},"state":"ACTIVE","url":"https://us-central1-cashman-790ad.cloudfunctions.net/handleExtractData","serviceConfig":{"ingressSettings":"ALLOW_ALL","revision":"handleextractdata-00112-vad","serviceAccountEmail":"106033459495-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"maxInstanceCount":3,"uri":"https://handleextractdata-7kw24wfehq-uc.a.run.app","maxInstanceRequestConcurrency":80,"timeoutSeconds":60,"availableCpu":"1"},"@type":"type.googleapis.com/google.cloud.functions.v2.Function","createTime":"2025-01-14T15:33:37.091214234Z","updateTime":"2025-06-26T09:58:45.148996549Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"ea98d418ec44309c4f409a90c9a19ed51f4fd6b6"},"satisfiesPzi":true,"name":"projects/cashman-790ad/locations/us-central1/functions/handleExtractData","environment":"GEN_2"},"resourceLocation":{"currentLocations":["us-central1"]}}
2025-06-26T10:00:00.606822Z I handleextractdata: 
2025-06-26T10:00:00.896590Z E handleextractdata: 
2025-06-26T10:00:00.901651Z ? handleextractdata: Client ID: 6304230220089, Bank Name: Fnb Bank, Method: OCR
2025-06-26T10:00:01.089994Z ? handleextractdata: Error during OCR processing: Unable to get page count. Is poppler installed and in PATH?
2025-06-26T10:00:01.090010Z ? handleextractdata: ERROR: Unable to get page count. Is poppler installed and in PATH?
(base) ubuntu@Echo:~/cashman$ 


curl -X POST https://python-functions-106033459495.europe-west1.run.app/extract \
  -H "Content-Type: application/json" \
  -d '{
        "clientId": "6907195459086",
        "bankName": "Absa Bank",
        "method": "OCR"
      }'
